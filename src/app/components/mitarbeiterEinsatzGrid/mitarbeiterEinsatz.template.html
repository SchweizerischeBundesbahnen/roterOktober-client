<navbar></navbar>
<messages></messages>
<main>
  <div class="container">
    <h1>Hallo</h1>
          <table class="table">
            <tr>
              <th class="col-lg-2">Mitarbeiter</th>
              <th class="col-lg-2">Projekte</th>
              <th class="col-lg-8">
                <table class="table col-lg-12">
                  <tr>
                    <th ng-repeat="month in $ctrl.months">{{ month }}</th>
                  </tr>
                </table>
              </th>
            </tr>
              <tr ng-repeat-start="mitarbeiterEinsatz in $ctrl.mitarbeiterEinsaetze">
                <td rowspan="{{mitarbeiterEinsatz.einsatze.length}}">{{mitarbeiterEinsatz.mitarbeiter.name}} {{mitarbeiterEinsatz.mitarbeiter.vorname}}</td>
                <td>{{ mitarbeiterEinsatz.einsatze[0].projekt.name }}</td>
                <td>
                  <div class="progress" ng-show="mitarbeiterEinsatz.einsatze[0].projekt.name">
                    <div class="progress-bar progress-bar-success col-lg-offset-{{mitarbeiterEinsatz.einsatze[0].pensum.fromMonth}}"
                      role="progressbar" role="progressbar"
                      style="width: {{ mitarbeiterEinsatz.einsatze[0].pensum.untilYear === '2016' ?
                      100/12 * (mitarbeiterEinsatz.einsatze[0].pensum.untilMonth - mitarbeiterEinsatz.einsatze[0].pensum.fromMonth)
                      : 100}}%">
                    </div>
                  </div>
                </td>
              </tr>
              <tr ng-repeat-end ng-repeat="einsatz in mitarbeiterEinsatz.einsatze.slice(1)">
                <td>{{ einsatz.projekt.name }}</td>
                <td>
                  <div class="progress" ng-show="einsatz.projekt.name">
                    <div class="progress-bar progress-bar-success col-lg-offset-{{einsatz.pensum.fromMonth}}"
                      role="progressbar" role="progressbar"
                      style="width: {{ einsatz.pensum.untilYear === '2016' ? 100/12 * (einsatz.pensum.untilMonth - einsatz.pensum.fromMonth) : 100}}%">
                    </div>
                  </div>
                </td>
              </tr>
          </table>
  </div>
</main>
